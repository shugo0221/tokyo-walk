# Supabase セットアップガイド

## 1. Supabaseプロジェクトの作成

1. [Supabase](https://supabase.com) にアクセス
2. 「Start your project」をクリック
3. GitHubアカウントでサインイン
4. 「New project」をクリック
5. プロジェクト名、データベースパスワードを設定
6. リージョンを選択（日本の場合は「Northeast Asia (Tokyo)」を推奨）
7. 「Create new project」をクリック

## 2. データベーステーブルの作成

プロジェクトが作成されたら、左サイドバーの「SQL Editor」をクリックし、以下のSQLを実行：

```sql
-- postsテーブルを作成
create table posts (
  id bigint generated by default as identity primary key,
  content text not null,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Row Level Security (RLS)を有効化
alter table posts enable row level security;

-- 誰でも投稿を読み取れるようにするポリシー
create policy "投稿は誰でも閲覧可能"
  on posts for select
  using (true);

-- 誰でも投稿を作成できるようにするポリシー
create policy "投稿は誰でも作成可能"
  on posts for insert
  with check (true);
```

## 3. 環境変数の設定

1. Supabaseダッシュボードの左サイドバーで「Project Settings」をクリック
2. 「API」セクションをクリック
3. 以下の情報をコピー：
   - `Project URL`
   - `anon public` キー

4. プロジェクトのルートディレクトリに `.env.local` ファイルを作成：

```bash
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

5. コピーした値を貼り付けて保存

## 4. アプリケーションの起動

```bash
npm run dev
```

ブラウザで `http://localhost:3000/posts` にアクセスして、投稿機能を試してください！

## トラブルシューティング

### エラー: "Failed to fetch"
- `.env.local` ファイルが正しく設定されているか確認
- Supabase プロジェクトが稼働しているか確認
- 開発サーバーを再起動

### エラー: "new row violates row-level security policy"
- RLSポリシーが正しく設定されているか確認
- SQLを再実行してみる

### 投稿が表示されない
- ブラウザのコンソールでエラーを確認
- Supabaseダッシュボードの「Table Editor」で `posts` テーブルにデータがあるか確認
